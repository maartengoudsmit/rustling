---
title: Relative date filter in Eleventy
tags:
  - eleventy
  - javascript
published: '2026-02-23T16:16:35.098Z'
updated: '2026-02-23T18:49:03.546Z'
---

For this new blog, I wanted to display the time since the post was published, e.g. “two days ago”. My CMS (the tool that I use to write these posts) appends a `published` and `updated` date to each post, indicating when it was originally published and when it was last updated. These are formatted like this: `2026-02-18T21:58:50.158Z`.
[Eleventy](http://www.11ty.dev) is a static site generator that uses templates to turn Markdown files into HTML. I want to use the templating language support built into Eleventy to turn a hard-to-read date string into “5 days ago”.
The great news is that Eleventy allows you to configure custom filters, which are then accessible in your template files. This means adding some code to your `eleventy.config.js` file.
I went with the following implementation:

```js
export default function (eleventyConfig) {
  eleventyConfig.addFilter("relative_date", (input) => {
    const difference = new Date(input) - Date.now();
    const rel = new Intl.RelativeTimeFormat("en", {
      style: "long",
      numeric: "auto",
    });

    const units = [
      { unit: "year", ms: 1000 * 60 * 60 * 24 * 365 },
      { unit: "week", ms: 1000 * 60 * 60 * 24 * 7 },
      { unit: "day", ms: 1000 * 60 * 60 * 24 },
      { unit: "hour", ms: 1000 * 60 * 60 },
      { unit: "minute", ms: 1000 * 60 },
    ];

    // Find the largest time unit that exceeds the corresponding ms thresholds
    const { unit, ms } =
      units.find(({ ms }) => Math.abs(diff) >= ms) ?? units.at(-1);
    return rel.format(Math.round(diff / ms), unit);
  });
}
```

This implementation assumes that if at least one year has passed, then it should output the the time in “x years ago”. If not, it should output in weeks, days, hours or - finally - minutes.
